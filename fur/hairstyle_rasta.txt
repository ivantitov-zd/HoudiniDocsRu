= Как |> создать дреды =

== Базовая настройка волос ==

# Создайте сферу в начале координат нажатием ((Ctrl+LMB)) на [Icon:SOP/sphere][Sphere|/shelf/sphere] на полке во вкладке __Create__.

# Войдите в объект sphere и установите значения в __Rows__ и __Columns__ равные `50`, чтобы получить более сглаженную форму.

# Добавьте на сферу волосы используя инструмент [Icon:FUR/add_fur][Add Fur|/shelf/groom_addfur] на полке во вкладке __Hair__.

# На объекте fur установите значение __Length__ равное `0.6`.

Так выглядят волосы по умолчанию. Созданные направляющие торчат прямо, и каждый сгенерированный волос имеет интерполированное положение между этими направляющими.

== Настройка рендера ==

Для удобства работы над прической, настройте быстрый рендер.

# Поверните вьюпорт так, чтобы смотреть на сферу сверху.

# Нажмите ((Ctrl+LMB)) на инструменте [Area Light|/shelf/arealight] на полке во вкладке [Lights and Cameras|/shelf/lightsandcameras]. Появится источник света в позиции наблюдения.

# Верните положение вьюпорта обратно на сферу.

# Переключитесь на [Render View|/ref/views/ipr] и нажмите __Render__.

Вы должны получить что-то вроде этого:

[Image:/images/howto/hair_rasta_step1.png]

NOTE:
        Во время работы над этим заданием, изменения будут видны и в [Scene Viewer|/basics/view], но рекомендуется периодически делать дополнительные тестовые рендеры.

== Формирование плотных прядей волос вдоль направляющих ==

В дредах каждый ближайший волос следует за направляющей, таким образом каждой направляющей принадлежит группа волос, которые повторяют ее форму.

Для этого можно использовать атрибут `clusterid`. Волосы интерполируются только с направляющей, имеющей тот же `clusterid`, поэтому, если назначить каждому волосу собственный `clusterid`, то можно добиться желаемого эффекта.

# Войдите в объект fur > выберите ноду guides.

# Присоедините [Icon:SOP/attribwrangle][Primitive Wrangle|/nodes/sop/attribwrangle] к ноде `INPUT_GUIDES`, и убедитесь, что на ней установлен [display flag|/network/flags].

# Введите в строку __VEXpression__ `i@clusterid = @primnum;`. Это создаст атрибут `clusterid` (`i@clusterid`) и запишет в него номер примитива (`@primnum`), таким образом, каждый примитив будет иметь различное значение.

# Перейдите на вкладку __Guides__ в [fur object|Node:obj/fur] и снизьте значение __Density__ до `50`, чтобы уменьшить количество прядей, и тем самым сделать их более толстыми.

Вот что получится после этих корректировок:

[Image:/images/howto/hair_rasta_step2.png]

== Уплотнение прядей ==

Чтобы сместить волосы каждой пряди ближе к направляющим.

#  Перейдите во вкладку __Appearance > Clump__ в [fur object|Node:obj/fur].

# Включите __Clump Fur__.

# Установите значение `50` в __Density__, в соответствии с количеством направляющих.

# Установите значение __Use Guide Curves__ в __Clump Geo Source__. Это позволит повторно использовать направляющие кривые для формирования прядей.

# Измените кривую как на скриншоте снизу. В результате волосы приблизятся к направляющей и потянутся вдоль нее.

    [Image:/images/howto/hair_rasta_clumpramp.png]
    
# Чтобы управлять силой этого эффекта, используйте параметр __Tightness__. Значение `0.5`, установленное по умолчанию, приблизит волосы к направляющей наполовину. Если будет установлено значение `1.0`, то все волосы сольются в тонкую нить. 

# На вкладке __Basic__, увеличьте значение __Segments__ до `20`.

    NOTE:
        Это условие необходимо выполнить, так как количества сегментов равных `4`, установленных по умолчанию, недостаточно, чтобы реализовать рисунок заданного нами профиля. Дополнительные сегменты также пригодятся для формирования кудрей, где используется шум высокой частоты.

[Image:/images/howto/hair_rasta_step3.png]

== Добавление кудрей ==

Добавьте кудри, чтобы придать дредам более естественный вид.

# Перейдите во вкладку __Appearance > Frizz__ в [fur object|Node:obj/fur] и установите значение `0.25` в параметре __Maximum Frizz__.

# Установите __Frequency__ в `20`.

    NOTE:
        В предыдущем разделе мы увеличили количество сегментов волос. Без этого будет недостаточно точек на кривых, чтобы реализовать высокочастотный шум.
        
# Измените кривую как на скриншоте снизу, чтобы получить кудри по всей длине волос: 
    [Image:/images/howto/hair_rasta_frizzramp.png]
    
    NOTE:
        В качестве альтернативы можно не использовать кривую, а установить параметры __Minimum Frizz__ и __Maximum Frizz__ в `0.25`.

[Image:/images/howto/hair_rasta_step4.png]

== Настройки шейдера ==

# Перейдите в шейдер для волос внутри fur object (Расположенный в `fur/shopnet1/textured_hair`).

    NOTE:
        Для быстрого доступа к материалу нажмите ((LMB)) на стрелку рядом с параметром __Material__ на вкладке __Basic__ объекта Fur.

        Для открытия параметров шейдера в новом окне используйте ((Ctrl+LMB)).

# Уменьшите отражающую способность волос, уменьшив __Intensity__ во вкладке __Reflection__ до `0.02`.

# Включите __Randomize__ для __Diffuse Saturation__ и __Diffuse Intensity__ на __Randomness Tab__.

# Вы можете использовать параметры ramp для создания редких седых волос. Настройте параметры в соответствии с приведенным ниже скриншотом.

[Image:/images/howto/hair_rasta_randomness.png]

NOTE:
    Случайные значения насыщенности и интенсивности настраиваются в параметрах __Source Values__. В нашем случае установлено 80% волос с высокой насыщенностью, и около 20% - с низкой, а также 80% волос темного цвета, и 20% - светлого.
    
    __Важно__: Для обоих параметров используется одинаковый [seed|Wp:Seed_(programming)]. Это означает, что положение каждого волоса на кривой параметра ramp будет одинаковым в обоих случаях. Другими словами, насыщенные волосы также будут светлыми.


[Image:/images/howto/hair_rasta_step5.png]

Чтобы уложить волосы, используйте инструменты на полке во вкладке [Grooming Shelf|/shelf/guidebrushes].

:bubble:
    #dir: right
    #display: gray
    [English version of this page|http://www.sidefx.com/docs/houdini16.5/fur/hairstyle_rasta]