= Работа с шерстью =

Инструмент [Add Fur|/shelf/groom_addfur] на полке во вкладке __Hair Utils__ является хорошей отправной точкой для начала груминга, поскольку он автоматически создает объекты [Guide Groom|Node:obj/guidegroom] и [Hair Generate|Node:obj/hairgen], привязанные к выбранной геометрии кожи. Если дополнительно выбрать анимированную версию геометрии, то инструмент создаст объект [Guide Deform object|Node:obj/guidedeform], который перемещает направляющие [Guide Groom|Node:obj/guidegroom] в соответствии с анимированной геометрией кожи. Тогда объект [Hair Generate|Node:obj/hairgen] генерирует анимированные волосы на основе этих направляющих.

В качестве альтернативы, можно использовать инструмент [Create Guides|/shelf/groom_guidegroom] на полке во вкладке __Hair Utils__, который добавляет только направляющие на персонаже. Данный вариант удобен при создании шерсти, так как основное время уделяется работе с направляющими, чтобы настроить первоначальное направление и длину шерсти. Также удобно использовать инструмент на определенных участках персонажа, и затем объединить направляющие в один поток, а позже сгенерировать волосы уже для всего объекта.

[Image:/images/fur/regions.png]
[Image:/images/fur/regions2.png]

Работа с отдельными участками является наиболее распространенным рабочим процессом, так как разные участки персонажа имеют различные особенности. Например, волосы на голове персонажа обычно сильно отличаются от волос на туловище. Этот метод создаст несколько объектов [Guide Groom|Node:obj/guidegroom], которые можно позже объединить с помощью инструмента [Merge Groom Objects|/shelf/groom_groommerge] на полке __Hair Utils__.

Причесывание направляющих выполняется с помощью инструментов на полке [Guide Process|/shelf/guideprocess].

TIP:
    С помощью инструмента [Curve Advect|/shelf/sop_groom_curveadvect] можно указать первоначальные направления шерсти, нанеся лишь несколько мазков.

    
После того, как причесаны отдельные участки персонажа, необходимо использовать инструмент [Merge Groom Objects|/shelf/groom_groommerge] на полке __Hair Utils__, чтобы объединить несколько объектов груминга в один поток. При помощи кисти делается бесшовный переход между участками с различным грумингом.

[Image:/images/fur/groommerge.png]

Затем можно сгенерировать волосы из полученных направляющих, используя инструмент [Generate Hair|/shelf/groom_hairgen] на полке во вкладке __Hair Utils__.

NOTE:
    Можно добавить несколько нод [Hair Generate|Node:/obj/hairgen] или [Guide Deform|Node:obj/guidedeform] после объединения в один поток, чтобы продолжить работу над отдельными участками.
    
Чтобы привязать объект груминга [Guide Groom|Node:obj/guidegroom] к анимированной версии геометрии, необходимо использовать инструмент [Deform Guides|/shelf/groom_animateguides] на полке __Hair Utils__.

Чтобы добавить динамику направляющим, которые находятся на статичной, либо анимированной геометрии, используйте инструмент [Simulate Guides|/shelf/groom_simguides] на вкладке __Hair Utils__.

== Советы ==

- Чтобы скрыть отдельные объекты груминга [Guide Groom|Node:obj/guidegroom], объединенные с помощью [Groom Merge|Node:obj/groommerge], используйте инструмент [Isolate Groom Parts|/shelf/groom_isolateparts]. Таким образом, генерация волос [Hair Generate|Node:/obj/hairgen] будет производиться только для выделенной ноды. Это бывает удобно, если необходимо ускорить работу над выбранным участком. Если необходимо выбрать несколько областей груминга, просто отключите флаг __Selectable__ на нодах [Hair Generate|Node:/obj/hairgen], затем выберите необходимые участки во вьюпорте, и нажмите на инструмент [Isolate Groom Parts|/shelf/groom_isolateparts] на полке __Hair Utils__.

    [Image:/images/fur/isolate.png]
    
- У большинства пушистых животных на шерсти встречаются яркие волоски. Чтобы сделать мех персонажа более реалистичным, вы можете добавить определенный процент белых волосков с помощью инструмента [Add White Hairs|/shelf/sop_groom_whitehair] на вкладке __Guide Process__. Этот инструмент создает атрибут `whitehair`, который используется в стандартном шейдере волос. Любая кривая со значением `1`, считается белым волоском и наследует цвет __White Hair__, указанный в шейдере.

    [Image:/images/hair/guard_white_hair.jpg]
    
- При работе с шерстью персонажа с различной длиной, имеет смысл изменять количество сегментов на кривых так, чтобы более длинные волосы имели больше сегментов, т.к. увеличение сегментов на всех волосах персонажа замедлит расчеты. Когда объединяются в один поток несколько объектов груминга, также интерполируется между ними и количество сегментов на направляющих. Например, если на шерсти тела персонажа 8 сегментов, а на голове - 50, между ними будет плавный количественный переход.

    [Image:/images/fur/segment.png]
    [Image:/images/fur/segment2.png]
    
    Визуализация волос на минотавре показывает направляющие с большим количеством сегментов красным цветом, среднее количество - зеленым, а одиночные сегменты синим.

- Иногда, во время симуляции, некоторые волосы необходимо убрать или скорректировать. Это легко исправляется, так как любые инструменты, используемые для статики возможно использовать и на анимированном персонаже.

    [Image:/images/fur/longguide.png]
    [Image:/images/fur/longguide2.png]

    В этом примере показано, как исправлена вытянутая направляющая во время анимации бега бурундука.

- Можно генерировать шерсть и без создания направляющих для таких объектов как трава или очень короткая шерсть. Это значительно экономит время вычисления. Просто отключите галочку __Use Guides__ на объекте [Hair Generate|Node:obj/hairgen], который полностью проигнорирует направляющие и создаст волосы прямо на геометрии кожи, как будто и не было никаких направляющих. Можно использовать универсальные элементы управления для задания направления (с помощью атрибута), количества сегментов и длины в разделе __Unguided Hairs__ объекта [Hair Generate|Node:obj/hairgen].

    [Image:/images/fur/shorthair.png]

:bubble:
    #dir: right
    #display: gray
    [English version of this page|http://www.sidefx.com/docs/houdini16.5/fur/workflow]