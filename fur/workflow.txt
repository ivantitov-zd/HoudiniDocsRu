= Fur workflow =

Инструмент [Add Fur|/shelf/groom_addfur] на полке во вкладке __Hair Utils__ является хорошей отправной точкой для начала груминга, поскольку он автоматически создает объекты [Guide Groom|Node:obj/guidegroom] и [Hair Generate|Node:obj/hairgen] для выбранной геометрии кожи. Также можно выбрать анимированную версию геометрии, и инструмент создаст объект [Guide Deform object|Node:obj/guidedeform], который перемещает направляющие [Guide Groom|Node:obj/guidegroom] в соответствии с анимированной геометрией кожи. Объект [Hair Generate|Node:obj/hairgen] генерирует анимированные волосы из этих направляющих.

Кроме того, инструмент [Create Guides|/shelf/groom_guidegroom] на полке во вкладке __Hair Utils__ добавляет направляющие на персонаже. Удобство этого инструмента заключается в том, что при создании шерсти основное время уделяется работе с направляющими, чтобы настроить первоначальное направление и длину шерсти. Также удобно создать только направляющие на определенных участках персонажа, затем объединить их в один поток, и сгенерировать волосы для всего объекта.

[Image:/images/fur/regions.png]
[Image:/images/fur/regions2.png]

Работа с определенными участками является наиболее распространенным рабочим процессом, так как разные участки персонажа имеют различные особенности. Например, волосы на голове персонажа обычно сильно отличаются от волос на туловище. Этот метод создаст несколько объектов [Guide Groom|Node:obj/guidegroom], которые можно позже объединить с помощью инструмента [Merge Groom Objects|/shelf/groom_groommerge] на полке __Hair Utils__.

Причесывание направляющиех выполняется с помощью инструментов на полке [Guide Process|/shelf/guideprocess].

TIP:
    С помощью инструмента [Curve Advect|/shelf/sop_groom_curveadvect] можно указать первоначальные направления шерсти, нанеся лишь несколько мазков.

    
После того, как причесаны разные части персонажа, необходимо использовать инструмент [Merge Groom Objects|/shelf/groom_groommerge] на полке __Hair Utils__, чтобы объединить несколько объектов груминга в один поток. При помощи кисти делается бесшовный переход между участками с различным грумингом.

[Image:/images/fur/groommerge.png]

Затем можно сгенерировать волосы из полученных направляющих, используя инструмент [Generate Hair|/shelf/groom_hairgen] на полке во вкладке __Hair Utils__.

NOTE:
    Можно добавить нессколько нод [Hair Generate|Node:/obj/hairgen] или [Guide Deform|Node:obj/guidedeform] после объединения в один поток, чтобы продолжить работу над отдельными частями.
    
Чтобы работать с объектом груминга [Guide Groom|Node:obj/guidegroom] на анимированной геометрии, необходимо использовать инструмент [Deform Guides|/shelf/groom_animateguides] на полке __Hair Utils__.

Чтобы добавить динамику направляющим, которые находятся на статичной, либо анимированной геометрии, используйте инструмент [Simulate Guides|/shelf/groom_simguides] на вкладке __Hair Utils__.

== Советы ==

- Чтобы скрыть объекты груминга [Guide Groom|Node:obj/guidegroom], объединенные с помощью [Groom Merge|Node:obj/groommerge], используйте инструмент [Isolate Groom Parts|/shelf/groom_isolateparts]. Таким образом, генерация волос [Hair Generate|Node:/obj/hairgen] будет производиться только для выбранных нод. Это бывает удобно, если необходимо ускорить работу над выбранным участком. Если у вас несколько областей груминга, просто отключите флаг __Selectable__ на нодах [Hair Generate|Node:/obj/hairgen], выберите регион во вьюпорте, и нажмите на инструмент [Isolate Groom Parts|/shelf/groom_isolateparts] на полке __Hair Utils__.

    [Image:/images/fur/isolate.png]
    
- У большинства пушистых животных в шерсти встречаются яркие волоски. Чтобы сделать мех персонажа более реалистичным, вы можете выделить определенный процент белых волос с помощью инструмента [Add White Hairs|/shelf/sop_groom_whitehair] на вкладке __Guide Process__. Этот инструмент создает атрибут `whitehair`, который используется в стандартном шейдере волос. Любая кривая с атрибутом `1`, считается белым волоском и назначает цвет __White Hair__, указанный на шейдере.

    [Image:/images/hair/guard_white_hair.jpg]
    
- При работе с шерстью персонажа с различной длиной, имеет смысл изменять количество сегментов на кривых, чтобы более длинные волосы имели больше сегментов, т.к. увеличение сегментов для всего персонажа замедлит расчеты. Когда объединяются в один поток несколько объектов груминга, также интреполируется и количество сегментов на направляющих. Например, если на шерсти тела персонажа 8 сегментов, а на голове - 50, между ними будет количественный переход.

    [Image:/images/fur/segment.png]
    [Image:/images/fur/segment2.png]
    
    Визуализация волос на минотавре показывает направляющие с большим количеством сегментов красным цветом, среднее количество - зеленым, а одиночные сегменты синим.

- Иногда, во время симуляции, попадаются волосы, которые необходимо убрать или причесать. Это можно легко решить, так как любые инструменты возможно использовать и на анимированном персонаже.

    [Image:/images/fur/longguide.png]
    [Image:/images/fur/longguide2.png]

    В этом примере показано, вытянута направляющая во время анимации бега бурундука.

- Можно генерировать шерсть и без направляющих для таких объектов как трава или рчень короткая шерсть. Это значительно экономит время вычисления. Просто отключите галочку __Use Guides__ на объекте [Hair Generate|Node:obj/hairgen], который полностью игнорирует направляющие и создаст волосы прямо из геометрии кожи, как будто у вас не было никаких направляющих. Вы можете использовать универсальные элементы управления для установки направления (с помощью атрибута), количества сегментов и длины в разделе __Unguided Hairs__ объекта [Hair Generate|Node:obj/hairgen].

    [Image:/images/fur/shorthair.png]